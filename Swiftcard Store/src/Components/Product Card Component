<!-- Product Card Component -->
<template x-for="product in filteredProductsList" :key="product.id">
  <div
    class="card bg-white border p-4 rounded shadow hover:shadow-lg transition-shadow duration-300 flex flex-col items-center"
    @click="openModal(product)"
  >
    <div class="flex justify-center w-full mb-4">
      <img :src="product.image" alt="" class="h-48 object-cover" />
    </div>
    <h3 class="text-lg font-bold text-black" x-text="product.title"></h3>
    <p class="text-gray-700 font-bold" x-text="'$' + product.price"></p>
    <p class="text-gray-500" x-text="product.category"></p>
    <div class="text-gray-700 mt-2 flex items-center">
      <template x-for="i in 5">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 20 20"
          :class="{'text-yellow-400': i <= Math.round(product.rating.rate), 'text-gray-400': i > Math.round(product.rating.rate)}"
          class="w-4 h-4"
        >
          <path
            d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.562 4.796a1 1 0 00.95.691h5.011c.969 0 1.372 1.24.588 1.81l-3.785 3.465a1 1 0 00-.288 1.118l1.25 4.88a1 1 0 01-1.45 1.05l-4.282-2.488a1 1 0 00-1.066 0l-4.282 2.488a1 1 0 01-1.45-1.05l1.25-4.88a1 1 0 00-.288-1.118L.55 8.434a1 1 0 01.588-1.81h5.011a1 1 0 00.95-.691L9.049 2.927z"
          />
        </svg>
      </template>
      <span x-text="`(${product.rating.count} reviews)`"></span>
    </div>
    <div @click.stop>
      <button @click="toggleFavorite(product.id)">
        <svg
          x-show="isFavorite(product.id)"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="red"
          class="w-6 h-6"
        >
          <path
            fill-rule="evenodd"
            d="M12 4.318c1.89-1.768 4.955-1.735 6.797.24 1.885 2.021 1.89 5.27.018 7.296L12 21.842l-6.815-9.99c-1.872-2.026-1.867-5.275.018-7.296 1.842-1.975 4.908-2.008 6.797-.239z"
            clip-rule="evenodd"
          />
        </svg>
        <svg
          x-show="!isFavorite(product.id)"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-6 h-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M12 4.318c1.89-1.768 4.955-1.735 6.797.24 1.885 2.021 1.89 5.27.018 7.296L12 21.842l-6.815-9.99c-1.872-2.026-1.867-5.275.018-7.296 1.842-1.975 4.908-2.008 6.797-.239z"
          />
        </svg>
      </button>
    </div>
    <button @click.stop class="bg-blue-600 text-white px-4 py-2 rounded mt-4">
      Add To Cart
    </button>
  </div>
</template>
